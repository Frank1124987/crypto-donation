{"remainingRequest":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/views/Register.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/views/Register.vue","mtime":1642503172346},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy93ZWlmYW40NTY5OTA4L0RvY3VtZW50cy9DcnlwdG9fRG9uYXRpb24vY3J5cHRvLWRvbmF0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgcmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGdldEF1dGgsIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCB9IGZyb20gImZpcmViYXNlL2F1dGgiOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGFjY291bnRTZXJ2aWNlIGZyb20gIkAvZmlyZXN0b3JlL2ZpcmVzdG9yZUZ1bmMuanMiOwppbXBvcnQgeyB3ZWIzLCBjb250cmFjdCB9IGZyb20gIkAvY29udHJhY3QvY29udHJhY3QuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1JlZ2lzdGVyJywKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgZW1haWwgPSByZWYoIiIpOwogICAgdmFyIHBhc3N3b3JkID0gcmVmKCIiKTsKICAgIHZhciB1c2VybmFtZSA9IHJlZigiIik7CiAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZXIoKTsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CgogICAgdmFyIHJlZ2lzdGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGF1dGgsIGFjY291bnRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB3ZWIzLmV0aC5nZXRBY2NvdW50cygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBhY2NvdW50cyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwudmFsdWUsIHBhc3N3b3JkLnZhbHVlKS50aGVuKGZ1bmN0aW9uICh1c2VyQ3JlZGVudGlhbCkgewogICAgICAgICAgICAgICAgICAvLyBTaWduZWQgaW4gCiAgICAgICAgICAgICAgICAgIGFjY291bnRTZXJ2aWNlLmNyZWF0ZUV0aGVyZXVtSWQoc3RvcmUuc3RhdGUudXNlci51SWQsIHsKICAgICAgICAgICAgICAgICAgICBldGhlcmV1bUlkOiBlbWFpbC52YWx1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY29udHJhY3QubWV0aG9kcy5yZWdpc3RlckRvbm9yKGVtYWlsLnZhbHVlLCB1c2VybmFtZS52YWx1ZSkuc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgZnJvbTogYWNjb3VudHNbMF0sCiAgICAgICAgICAgICAgICAgICAgZ2FzOiA5MTg3NTAwCiAgICAgICAgICAgICAgICAgIH0pLnRoZW4oY29uc29sZS5sb2cpOwogICAgICAgICAgICAgICAgICByb3V0ZS5wdXNoKCcvJyk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7CiAgICAgICAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvckNvZGUsIGVycm9yTWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiByZWdpc3RlcigpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgIHJlZ2lzdGVyOiByZWdpc3RlcgogICAgfTsKICB9Cn07"},{"version":3,"sources":["/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/views/Register.vue"],"names":[],"mappings":";;AA+BA,SAAQ,GAAR,EAAa,KAAb,QAAyB,KAAzB;AACA,SAAS,OAAT,EAAkB,8BAAlB,QAAwD,eAAxD;AACA,SAAQ,SAAR,QAAwB,YAAxB;AACA,SAAQ,QAAR,QAAuB,MAAvB;AAEA,OAAO,cAAP,MAA2B,8BAA3B;AACA,SAAQ,IAAR,EAAc,QAAd,QAA6B,wBAA7B;AACA,eAAc;AACV,EAAA,IAAI,EAAE,UADI;AAEV,EAAA,KAFU,mBAEH;AACH,QAAM,KAAI,GAAI,GAAG,CAAC,EAAD,CAAjB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;AAEA,QAAM,KAAI,GAAI,SAAS,EAAvB;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;;AAGA,QAAM,QAAO;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AACP,gBAAA,IADO,GACA,OAAO,EADP;AAAA;AAAA,uBAEU,IAAI,CAAC,GAAL,CAAS,WAAT,EAFV;;AAAA;AAEP,gBAAA,QAFO;AAGb,gBAAA,8BAA8B,CAAC,IAAD,EAAO,KAAK,CAAC,KAAb,EAAoB,QAAQ,CAAC,KAA7B,CAA9B,CACK,IADL,CACU,UAAC,cAAD,EAAoB;AACtB;AACA,kBAAA,cAAc,CAAC,gBAAf,CAAgC,KAAK,CAAC,KAAN,CAAY,IAAZ,CAAiB,GAAjD,EAAsD;AAAC,oBAAA,UAAS,EAAI,KAAK,CAAC;AAApB,mBAAtD;AACA,kBAAA,QAAQ,CAAC,OAAT,CAAiB,aAAjB,CAA+B,KAAK,CAAC,KAArC,EAA4C,QAAQ,CAAC,KAArD,EAA4D,IAA5D,CAAiE;AAC7D,oBAAA,IAAI,EAAE,QAAQ,CAAC,CAAD,CAD+C;AAE7D,oBAAA,GAAE,EAAI;AAFuD,mBAAjE,EAGG,IAHH,CAGQ,OAAO,CAAC,GAHhB;AAIA,kBAAA,KAAK,CAAC,IAAN,CAAW,GAAX;AACH,iBATL,EAUK,KAVL,CAUW,UAAC,KAAD,EAAW;AACd,sBAAM,SAAQ,GAAI,KAAK,CAAC,IAAxB;AACA,sBAAM,YAAW,GAAI,KAAK,CAAC,OAA3B;AACA,kBAAA,OAAO,CAAC,GAAR,CAAY,SAAZ,EAAuB,YAAvB;AACH,iBAdL;;AAHa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb;;AAoBA,WAAO;AACH,MAAA,KAAK,EAAL,KADG;AAEH,MAAA,QAAQ,EAAR,QAFG;AAGH,MAAA,QAAQ,EAAR,QAHG;AAIH,MAAA,QAAO,EAAP;AAJG,KAAP;AAMJ;AArCU,CAAd","sourcesContent":["<template>\n    <div class=\"register\">\n        <h1>\n            Register\n        </h1>\n        <form @submit.prevent=\"register\">\n            <div>\n                <label for=\"email\">Email:</label>\n                <br>\n                <input type=\"text\" id=\"email\" v-model=\"email\" name=\"email\">\n            </div>\n            <br>\n            <div>\n                <label for=\"password\">Password:</label>\n                <br>\n                <input type=\"password\" id=\"password\" v-model=\"password\" name=\"password\">\n            </div>\n            <div>\n                <label for=\"username\">Username:</label>\n                <br>\n                <input type=\"text\" id=\"username\" v-model=\"username\" name=\"username\">\n            </div>\n            <br>\n            <input type=\"submit\" value=\"Submit\">\n        </form>\n        <router-link to=\"Login\">Login</router-link>\n    </div>\n</template>\n\n\n<script>\nimport {ref, watch} from 'vue'\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport {useRouter} from \"vue-router\"\nimport {useStore} from \"vuex\"\n\nimport accountService from \"@/firestore/firestoreFunc.js\"\nimport {web3, contract} from \"@/contract/contract.js\"\nexport default{\n    name: 'Register',\n    setup(){\n        const email = ref(\"\")\n        const password = ref(\"\")\n        const username = ref(\"\")\n\n        const route = useRouter()\n        const store = useStore()\n\n\n        const register = async () => {\n            const auth = getAuth();\n            const accounts = await web3.eth.getAccounts()\n            createUserWithEmailAndPassword(auth, email.value, password.value)\n                .then((userCredential) => {\n                    // Signed in \n                    accountService.createEthereumId(store.state.user.uId, {ethereumId : email.value})\n                    contract.methods.registerDonor(email.value, username.value).send({\n                        from: accounts[0],\n                        gas : 9187500\n                    }).then(console.log)\n                    route.push('/')\n                })\n                .catch((error) => {\n                    const errorCode = error.code;\n                    const errorMessage = error.message;\n                    console.log(errorCode, errorMessage)\n                });\n        }\n\n        return {\n            email,\n            password,\n            username,\n            register\n        }\n    }\n}\n</script>\n\n<style scoped>\nform > input {\n    margin: 1%;\n}\n\n.register {\n    text-align: center;\n}\n</style>"],"sourceRoot":""}]}