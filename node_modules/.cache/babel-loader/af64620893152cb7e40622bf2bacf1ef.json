{"remainingRequest":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/components/nft/RegisterNFT.vue?vue&type=template&id=47254b46&scoped=true","dependencies":[{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/components/nft/RegisterNFT.vue","mtime":1642503172334},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628298225000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCB2TW9kZWxUZXh0IGFzIF92TW9kZWxUZXh0LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgdk1vZGVsU2VsZWN0IGFzIF92TW9kZWxTZWxlY3QsIHdpdGhNb2RpZmllcnMgYXMgX3dpdGhNb2RpZmllcnMsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTQ3MjU0YjQ2Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJsYWJlbCIsIHsKICBmb3I6ICJuYW1lIgp9LCAiTkZU5ZCN56ix77yaIiwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfMyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJsYWJlbCIsIHsKICBmb3I6ICJkZXNjcmlwdGlvbiIKfSwgIuaPj+i/sO+8miIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImJyIiwgbnVsbCwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzUgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgIumBuOaTh+aOm+mJpOeahOWwiOahiO+8miIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF83ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImJyIiwgbnVsbCwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzggPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgibGFiZWwiLCB7CiAgZm9yOiAiZm9ybUZpbGUiLAogIGNsYXNzOiAiZm9ybS1sYWJlbCIKfSwgIlVwbG9hZCBJbWFnZe+8miIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF85ID0gWyJzcmMiXTsKCnZhciBfaG9pc3RlZF8xMCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJiciIsIG51bGwsIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8xMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJpbnB1dCIsIHsKICB0eXBlOiAic3VibWl0IiwKICB2YWx1ZTogIuaPkOS6pCIKfSwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgbnVsbCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImZvcm0iLCB7CiAgICBvblN1Ym1pdDogX2NhY2hlWzRdIHx8IChfY2FjaGVbNF0gPSBfd2l0aE1vZGlmaWVycyhmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAucmVnaXN0ZXJORlQgJiYgJHNldHVwLnJlZ2lzdGVyTkZULmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0sIFsicHJldmVudCJdKSkKICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgbnVsbCwgW19ob2lzdGVkXzEsIF9ob2lzdGVkXzIsIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlRWxlbWVudFZOb2RlKCJpbnB1dCIsIHsKICAgIGlkOiAibmFtZSIsCiAgICB0eXBlOiAidGV4dCIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLm5hbWUgPSAkZXZlbnQ7CiAgICB9KQogIH0sIG51bGwsIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApLCBbW192TW9kZWxUZXh0LCAkc2V0dXAubmFtZV1dKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBudWxsLCBbX2hvaXN0ZWRfMywgX2hvaXN0ZWRfNCwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVFbGVtZW50Vk5vZGUoImlucHV0IiwgewogICAgaWQ6ICJkZXNjcmlwdGlvbiIsCiAgICB0eXBlOiAidGV4dCIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLmRlc2NyaXB0aW9uID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJHNldHVwLmRlc2NyaXB0aW9uXV0pXSksIF9ob2lzdGVkXzUsIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIG51bGwsIFtfaG9pc3RlZF82LCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZSgic2VsZWN0IiwgewogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC5zZWxlY3RlZFBsYW4gPSAkZXZlbnQ7CiAgICB9KQogIH0sIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC5wbGFucywgZnVuY3Rpb24gKHBsYW4sIGlkKSB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJvcHRpb24iLCB7CiAgICAgIGtleTogaWQKICAgIH0sIF90b0Rpc3BsYXlTdHJpbmcocGxhbi5uYW1lKSwgMQogICAgLyogVEVYVCAqLwogICAgKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0sIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApLCBbW192TW9kZWxTZWxlY3QsICRzZXR1cC5zZWxlY3RlZFBsYW5dXSldKSwgX2hvaXN0ZWRfNywgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgbnVsbCwgW19ob2lzdGVkXzgsIF9jcmVhdGVFbGVtZW50Vk5vZGUoImlucHV0IiwgewogICAgY2xhc3M6ICJmb3JtLWNvbnRyb2wiLAogICAgdHlwZTogImZpbGUiLAogICAgb25JbnB1dDogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAucGlja0ZpbGUgJiYgJHNldHVwLnBpY2tGaWxlLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pLAogICAgYWNjZXB0OiAiaW1hZ2UvKiIKICB9LCBudWxsLCAzMgogIC8qIEhZRFJBVEVfRVZFTlRTICovCiAgKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaW1nIiwgewogICAgY2xhc3M6ICJwcmV2aWV3LWltZyIsCiAgICBzcmM6ICRzZXR1cC5pbWFnZSwKICAgIGFsdDogIiIKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIF9ob2lzdGVkXzkpXSksIF9ob2lzdGVkXzEwLCBfaG9pc3RlZF8xMV0sIDMyCiAgLyogSFlEUkFURV9FVkVOVFMgKi8KICApXSk7Cn0="},{"version":3,"sources":["/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/components/nft/RegisterNFT.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <form @submit.prevent=\"registerNFT\">\n            <div>\n                <label for=\"name\">NFT名稱：</label>\n                <br>\n                <input id=\"name\" type=\"text\" v-model=\"name\" >\n            </div>\n            <div>\n                <label for=\"description\">描述：</label>\n                <br>\n                <input id=\"description\" type=\"text\" v-model=\"description\">\n            </div>\n            <br>\n            <div>\n                <span>選擇掛鉤的專案：</span>\n                <select v-model=\"selectedPlan\">\n                    <option v-for=\"(plan, id) in plans\" :key=id>\n                        {{plan.name}}\n                    </option>\n                </select>\n            </div>\n            <br>\n            <div>\n                <label for=\"formFile\" class=\"form-label\">Upload Image：</label>\n                <input class=\"form-control\" type=\"file\" @input=\"pickFile\" accept=\"image/*\">\n                <img class=\"preview-img\" :src=\"image\" alt=\"\">\n            </div>\n            <br>\n            <input type=\"submit\" value=\"提交\">\n        </form>\n    </div>\n</template>\n\n<script>\nimport {ref, computed} from 'vue'\nimport {useStore} from 'vuex'\nimport {useRoute, useRouter} from 'vue-router'\nimport {web3, contract} from '@/contract/contract.js'\nimport {NFTStorage, File} from 'nft.storage'\n// import {pack} from 'ipfs-car/pack'\nimport * as fs from 'fs'\n\nexport default {\n    props: {\n        plans: {\n            type: Object\n        }\n    },\n    setup(props){\n        const route = useRoute()\n\n        const name = ref(\"\");\n        const description = ref(\"\");\n        const image = ref(\"\");\n        const selectedPlan = ref(\"\")\n\n        const plans = ref(props.plans)\n\n        let image_temp = null\n        const pickFile = (event) => {\n            const reader = new FileReader()\n            reader.onload = (e) => {\n                image.value = e.target.result;\n            }\n\n            image_temp = event.target.files[0]\n            reader.readAsDataURL(event.target.files[0])\n        }\n\n        const registerNFT = async () => {\n            const apiKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDY0Q2NGNEVlMEM4N2I2QjZlNEFDRTRFQWRiNzg0MGQ0RjUyMjMxMTciLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYzOTU0NDQyNTgwNCwibmFtZSI6ImNyeXB0X2RvbmF0aW9uIn0.iGh9m27-DncOEfMl0vBEy8fPWIKY32eeQLkmatfawbI'\n            const client = new NFTStorage({token : apiKey})\n            const metadata = await client.store({\n                name: name.value,\n                description: description.value,\n                image: image_temp\n            })\n            const address = await web3.eth.getAccounts()\n\n            contract.methods.register_nft(route.params.departmentId, name.value, metadata.url).send({\n                from: address[0],\n                gas : 9187500,\n            }).then(() => {\n                contract.methods.addNFTToPlan(route.params.departmentId, selectedPlan.value, name.value).send({\n                    from: address[0],\n                    gas : 9187500,      \n                }).then(console.log)\n                .catch(console.log)\n            }).catch(err => {\n                console.log(\"error: \", err)\n            })\n        }\n\n\n        return {\n            name,\n            description,\n            image,\n            plans,\n            selectedPlan,\n            pickFile,\n            registerNFT\n        }\n    }\n}\n</script>\n\n<style scoped>\n.imagePreviewWrapper {\n  background-repeat: no-repeat;\n    width: 250px;\n    height: 250px;\n    display: block;\n    cursor: pointer;\n    margin: 0 auto 30px;\n    background-size: contain;\n    background-position: center center;\n}\n\n.preview-img {\n    width: 50%;\n}\n</style>"],"sourceRoot":""}]}