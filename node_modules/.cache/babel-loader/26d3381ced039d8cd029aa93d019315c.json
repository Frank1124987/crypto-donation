{"remainingRequest":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/thread-loader/dist/cjs.js!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/userAccount/firestoreFunc.js","dependencies":[{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/userAccount/firestoreFunc.js","mtime":1639241078569},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvd2VpZmFuNDU2OTkwOC9Eb2N1bWVudHMvQ3J5cHRvX0RvbmF0aW9uL2NyeXB0by1kb25hdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvd2VpZmFuNDU2OTkwOC9Eb2N1bWVudHMvQ3J5cHRvX0RvbmF0aW9uL2NyeXB0by1kb25hdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgZmlyZWJhc2VBUFAgfSBmcm9tICIuL2ZpcmVzdG9yZUluaXQuanMiOwppbXBvcnQgeyBnZXRGaXJlc3RvcmUsIGNvbGxlY3Rpb24sIGdldERvYywgZG9jLCBzZXREb2MsIGFkZERvYyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZS9saXRlJzsKaW1wb3J0IHsgZ2V0QXV0aCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQgfSBmcm9tICJmaXJlYmFzZS9hdXRoIjsKaW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi9zdG9yZS9pbmRleC5qcyc7CnZhciBkYiA9IGdldEZpcmVzdG9yZSgpOyAvLyBjb25zdCBkb2MgPSBjb2xsZWN0aW9uKGRiLCAidXNlckFjY291bnRUb0V0aGVyZXVtSWQiKQoKdmFyIGRiU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gZGJTZXJ2aWNlKGRiKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgZGJTZXJ2aWNlKTsKCiAgICB0aGlzLmRiID0gZGI7CiAgfQoKICBfY3JlYXRlQ2xhc3MoZGJTZXJ2aWNlLCBbewogICAga2V5OiAicmVhZEFjY291bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRBY2NvdW50KHVpZCkgewogICAgICB2YXIgcGF0aCA9ICJ1c2VyQWNjb3VudFRvRXRoZXJldW1JZC8iICsgdWlkOwogICAgICBnZXREb2MoZG9jKGRiLCBwYXRoKSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC5leGlzdHMoKSkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXN1bHQuZGF0YSgpOwogICAgICAgICAgc3RvcmUuY29tbWl0KCJzZXRVc2VyRXRoZXJldW1JZCIsIGRhdGEuZXRoZXJldW1JZCk7IC8vIHN0b3JlLmNvbW1pdCgic2V0QWRkcmVzcyIsIGRhdGEuYWRkcmVzc2VzLmV0aGVyZXVtQWRkcmVzcykKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUFjY291bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUFjY291bnQodWlkLCBkYXRhc2V0KSB7CiAgICAgIGNvbnNvbGUubG9nKHVpZCwgZGF0YXNldCk7CiAgICAgIHNldERvYyhkb2MoZGIsICJ1c2VyQWNjb3VudFRvRXRoZXJldW1JZCIsIHVpZCksIHsKICAgICAgICBldGhlcmV1bUlkOiBkYXRhc2V0LmV0aGVyZXVtSWQKICAgICAgfSwgewogICAgICAgIG1lcmdlOiB0cnVlCiAgICAgIH0pLnRoZW4oY29uc29sZS5sb2cpOwogICAgICBzZXREb2MoZG9jKGRiLCAidXN1c2VyQWNjb3VudFRvRXRoZXJldW1JZC8iICsgdWlkICsgIi9hZGRyZXNzZXMiLCBkYXRhc2V0LmV0aGVyZXVtQWRkcmVzcyksIHsKICAgICAgICBtZXJnZTogdHJ1ZQogICAgICB9KS50aGVuKGNvbnNvbGUubG9nKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBkYlNlcnZpY2U7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IG5ldyBkYlNlcnZpY2UoZGIpOw=="},{"version":3,"sources":["/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/userAccount/firestoreFunc.js"],"names":["firebaseAPP","getFirestore","collection","getDoc","doc","setDoc","addDoc","getAuth","signInWithEmailAndPassword","store","db","dbService","uid","path","then","result","exists","data","commit","ethereumId","dataset","console","log","merge","ethereumAddress"],"mappings":";;AAAA,SAASA,WAAT,QAA4B,oBAA5B;AACA,SAAQC,YAAR,EAAsBC,UAAtB,EAAkCC,MAAlC,EAA0CC,GAA1C,EAA+CC,MAA/C,EAAuDC,MAAvD,QAAoE,yBAApE;AACA,SAASC,OAAT,EAAkBC,0BAAlB,QAAoD,eAApD;AACA,SAAQC,KAAR,QAAoB,mBAApB;AAEA,IAAMC,EAAE,GAAGT,YAAY,EAAvB,C,CACA;;IAEMU,S;AACF,qBAAYD,EAAZ,EAAe;AAAA;;AACX,SAAKA,EAAL,GAAUA,EAAV;AACH;;;;WAED,qBAAYE,GAAZ,EAAgB;AACZ,UAAMC,IAAI,GAAG,6BAA6BD,GAA1C;AACAT,MAAAA,MAAM,CAACC,GAAG,CAACM,EAAD,EAAKG,IAAL,CAAJ,CAAN,CAAsBC,IAAtB,CAA2B,UAACC,MAAD,EAAY;AACnC,YAAIA,MAAM,CAACC,MAAP,EAAJ,EAAoB;AAChB,cAAMC,IAAI,GAAGF,MAAM,CAACE,IAAP,EAAb;AACAR,UAAAA,KAAK,CAACS,MAAN,CAAa,mBAAb,EAAkCD,IAAI,CAACE,UAAvC,EAFgB,CAGhB;AACH;AACJ,OAND;AAOH;;;WAED,uBAAcP,GAAd,EAAmBQ,OAAnB,EAA2B;AACvBC,MAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ,EAAiBQ,OAAjB;AACAf,MAAAA,MAAM,CAACD,GAAG,CAACM,EAAD,EAAK,yBAAL,EAAgCE,GAAhC,CAAJ,EAA0C;AAACO,QAAAA,UAAU,EAAGC,OAAO,CAACD;AAAtB,OAA1C,EAA6E;AAACI,QAAAA,KAAK,EAAE;AAAR,OAA7E,CAAN,CAAmGT,IAAnG,CAAwGO,OAAO,CAACC,GAAhH;AAEAjB,MAAAA,MAAM,CAACD,GAAG,CAACM,EAAD,EAAK,+BAA+BE,GAA/B,GAAqC,YAA1C,EAAwDQ,OAAO,CAACI,eAAhE,CAAJ,EAAsF;AAACD,QAAAA,KAAK,EAAE;AAAR,OAAtF,CAAN,CAA2GT,IAA3G,CAAgHO,OAAO,CAACC,GAAxH;AACH;;;;;;AAGL,eAAe,IAAIX,SAAJ,CAAcD,EAAd,CAAf","sourcesContent":["import { firebaseAPP } from \"./firestoreInit.js\"\nimport {getFirestore, collection, getDoc, doc, setDoc, addDoc} from 'firebase/firestore/lite';\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\nimport {store} from '../store/index.js'\n\nconst db = getFirestore()\n// const doc = collection(db, \"userAccountToEthereumId\")\n\nclass dbService{\n    constructor(db){\n        this.db = db\n    }\n\n    readAccount(uid){\n        const path = \"userAccountToEthereumId/\" + uid\n        getDoc(doc(db, path)).then((result) => {\n            if( result.exists()){\n                const data = result.data()\n                store.commit(\"setUserEthereumId\", data.ethereumId)\n                // store.commit(\"setAddress\", data.addresses.ethereumAddress)\n            }\n        })\n    }\n\n    createAccount(uid, dataset){\n        console.log(uid, dataset)\n        setDoc(doc(db, \"userAccountToEthereumId\", uid), {ethereumId : dataset.ethereumId}, {merge: true} ).then(console.log)\n        \n        setDoc(doc(db, \"ususerAccountToEthereumId/\" + uid + \"/addresses\", dataset.ethereumAddress), {merge: true}).then(console.log)\n    }\n}\n\nexport default new dbService(db)"]}]}