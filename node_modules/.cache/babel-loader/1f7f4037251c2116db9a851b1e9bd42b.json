{"remainingRequest":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/views/user/RegisterDonor.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/views/user/RegisterDonor.vue","mtime":1639327831773},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy93ZWlmYW40NTY5OTA4L0RvY3VtZW50cy9DcnlwdG9fRG9uYXRpb24vY3J5cHRvLWRvbmF0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGNvbnRyYWN0IH0gZnJvbSAnQC9jb250cmFjdC9jb250cmFjdC5qcyc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7CmltcG9ydCBhY2NvdW50U2VydmljZSBmcm9tICdAL2ZpcmVzdG9yZS9maXJlc3RvcmVGdW5jLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgdXNlcklkID0gcmVmKCIiKTsKICAgIHZhciB1c2VyTmFtZSA9IHJlZigiIik7CiAgICB2YXIgYWRkcmVzcyA9IHJlZigiIik7CgogICAgdmFyIHJlZ2lzdGVyRG9ub3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhZGRyZXNzLnZhbHVlKTsKICAgICAgICAgICAgICAgIGNvbnRyYWN0Lm1ldGhvZHMucmVnaXN0ZXJEb25vcih1c2VySWQudmFsdWUsIHVzZXJOYW1lLnZhbHVlKS5zZW5kKHsKICAgICAgICAgICAgICAgICAgZnJvbTogYWRkcmVzcy52YWx1ZSwKICAgICAgICAgICAgICAgICAgZ2FzOiA5MTg3NTAwCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJzZXRVc2VyRXRoZXJldW1JZCIsIHVzZXJJZC52YWx1ZSk7CiAgICAgICAgICAgICAgICAgIGNvbnRyYWN0Lm1ldGhvZHMucmVnaXN0ZXJMb2dpbkFkZHJlc3ModXNlcklkLnZhbHVlLCBhZGRyZXNzLnZhbHVlKS5zZW5kKHsKICAgICAgICAgICAgICAgICAgICBmcm9tOiBhZGRyZXNzLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIGdhczogNjcyMTk3NSwKICAgICAgICAgICAgICAgICAgICBnYXNQcmljZTogJzMwMDAwMDAwJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImhmc2RpYWZhZnNhc2Fkc2Rhc2RmZGEiKTsKICAgICAgICAgICAgICAgICAgdmFyIHVzZXJEYXRhID0gewogICAgICAgICAgICAgICAgICAgIGV0aGVyZXVtSWQ6IHVzZXJJZC52YWx1ZSwKICAgICAgICAgICAgICAgICAgICBldGhlcmV1bUFkZHJlc3M6IGFkZHJlc3MudmFsdWUKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UuY3JlYXRlQWNjb3VudChzdG9yZS5zdGF0ZS51c2VyLnVJZCwgdXNlckRhdGEpOwogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChlcnJvcik7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gcmVnaXN0ZXJEb25vcigpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIHJlZ2lzdGVyRG9ub3I6IHJlZ2lzdGVyRG9ub3IsCiAgICAgIHVzZXJOYW1lOiB1c2VyTmFtZSwKICAgICAgdXNlcklkOiB1c2VySWQsCiAgICAgIGFkZHJlc3M6IGFkZHJlc3MKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/Users/weifan4569908/Documents/Crypto_Donation/crypto-donate/src/views/user/RegisterDonor.vue"],"names":[],"mappings":";;AA4BA,SAAQ,GAAR,EAAa,QAAb,QAA4B,KAA5B;AACA,SAAQ,QAAR,QAAuB,MAAvB;AACA,SAAQ,QAAR,QAAuB,wBAAvB;AACA,SAAQ,SAAR,QAAwB,YAAxB;AACA,SAAQ,OAAR,QAAsB,eAAtB;AAEA,OAAO,cAAP,MAA2B,8BAA3B;AACA,eAAc;AACV,EAAA,KADU,mBACH;AACH,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;AAEA,QAAM,MAAK,GAAI,GAAG,CAAC,EAAD,CAAlB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,EAAD,CAAnB;;AAEA,QAAM,aAAY;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAClB,gBAAA,OAAO,CAAC,GAAR,CAAY,OAAO,CAAC,KAApB;AACA,gBAAA,QAAQ,CAAC,OAAT,CAAiB,aAAjB,CAA+B,MAAM,CAAC,KAAtC,EAA6C,QAAQ,CAAC,KAAtD,EAA6D,IAA7D,CAAkE;AAC9D,kBAAA,IAAI,EAAE,OAAO,CAAC,KADgD;AAE9D,kBAAA,GAAE,EAAI;AAFwD,iBAAlE,EAGG,IAHH,CAGQ,YAAM;AACV,kBAAA,KAAK,CAAC,MAAN,CAAa,mBAAb,EAAkC,MAAM,CAAC,KAAzC;AACA,kBAAA,QAAQ,CAAC,OAAT,CAAiB,oBAAjB,CAAsC,MAAM,CAAC,KAA7C,EAAoD,OAAO,CAAC,KAA5D,EAAmE,IAAnE,CAAwE;AACpE,oBAAA,IAAI,EAAE,OAAO,CAAC,KADsD;AAEpE,oBAAA,GAAE,EAAI,OAF8D;AAGpE,oBAAA,QAAO,EAAI;AAHyD,mBAAxE;AAMA,kBAAA,OAAO,CAAC,GAAR,CAAY,wBAAZ;AACA,sBAAM,QAAO,GAAI;AACb,oBAAA,UAAU,EAAE,MAAM,CAAC,KADN;AAEb,oBAAA,eAAe,EAAE,OAAO,CAAC;AAFZ,mBAAjB;AAIA,kBAAA,cAAc,CAAC,aAAf,CAA6B,KAAK,CAAC,KAAN,CAAY,IAAZ,CAAiB,GAA9C,EAAmD,QAAnD;AACA,kBAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;AACH,iBAlBD,EAkBG,KAlBH,CAkBS,UAAA,KAAI,EAAK;AACd,kBAAA,MAAM,CAAC,KAAP,CAAa,KAAb;AACA,kBAAA,MAAM,CAAC,EAAP;AACH,iBArBD;;AAFkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAZ,aAAY;AAAA;AAAA;AAAA,OAAlB;;AA4BA,WAAO;AACH,MAAA,aAAa,EAAb,aADG;AAEH,MAAA,QAAQ,EAAR,QAFG;AAGH,MAAA,MAAM,EAAN,MAHG;AAIH,MAAA,OAAM,EAAN;AAJG,KAAP;AAMJ;AA3CU,CAAd","sourcesContent":["<template>\n    <div>\n        <h1>\n            登記捐款帳號\n        </h1>\n        <form @submit.prevent=\"registerDonor\">\n            <div>\n                <label for=\"userId\">ID: </label>\n                <br>\n                <input id=\"userId\" type=\"text\" v-model=\"userId\" >\n            </div>\n            <div>\n                <label for=\"userName\">使用者名稱:</label>\n                <br>\n                <input id=\"userName\" type=\"text\" v-model=\"userName\" >\n            </div>\n            <div>\n                <label for=\"address\">地址: </label>\n                <br>\n                <input id=\"address\" type=\"text\" v-model=\"address\" >\n            </div>\n            <br>\n            <input type=\"submit\" value=\"提交\">\n        </form>\n    </div>\n</template>\n\n<script>\nimport {ref, computed} from 'vue'\nimport {useStore} from 'vuex'\nimport {contract} from '@/contract/contract.js'\nimport {useRouter} from 'vue-router'\nimport {getAuth} from 'firebase/auth'\n\nimport accountService from '@/firestore/firestoreFunc.js'\nexport default{\n    setup(){\n        const store = useStore()\n        const router = useRouter()\n\n        const userId = ref(\"\")\n        const userName = ref(\"\")\n        const address = ref(\"\")\n        \n        const registerDonor = async () => {\n            console.log(address.value)\n            contract.methods.registerDonor(userId.value, userName.value).send({\n                from: address.value,\n                gas : 9187500\n            }).then(() => {\n                store.commit(\"setUserEthereumId\", userId.value)\n                contract.methods.registerLoginAddress(userId.value, address.value).send({\n                    from: address.value,\n                    gas : 6721975,\n                    gasPrice : '30000000'  \n                })\n                \n                console.log(\"hfsdiafafsasadsdasdfda\")\n                const userData = {\n                    ethereumId: userId.value,\n                    ethereumAddress: address.value\n                }\n                accountService.createAccount(store.state.user.uId, userData)\n                router.push('/')\n            }).catch(error => {\n                window.alert(error)\n                router.go()\n            })\n        }\n\n\n\n        return {\n            registerDonor,\n            userName,\n            userId,\n            address\n        }\n    }\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}]}